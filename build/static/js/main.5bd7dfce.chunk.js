(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},22:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(15),c=t.n(o),u=(t(22),t(16)),i=t(2),l=function(e){var n=e.setFilter;return r.a.createElement("div",null,"Filter by name: ",r.a.createElement("input",{onChange:function(e){return n(e.target.value)}}))},s=function(e){var n=e.addPerson,t=e.setNewName,a=e.setNewNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:function(e){return t(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:function(e){return a(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=t(4),d=t.n(m),f="/api/persons",b=function(){return d.a.get(f)},h=function(e){return d.a.post(f,e)},E=function(e,n){return d.a.put("".concat(f,"/").concat(e),n)},p=function(e){return d.a.delete("".concat(f,"/").concat(e))},v=function(e){var n=e.persons,t=e.setPersons,a=e.filter;return r.a.createElement("div",null,n.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())})).map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("p",null,e.name," ",e.number),r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Delete person "+e.name+"?")&&p(e.id).then((function(){b().then((function(e){t(e.data)}))}))}(e)}},"Delete"))})))},g=function(e){var n=e.message,t={color:e.isError?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===n?null:r.a.createElement("div",{style:t,className:"error"},n)},w=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),m=Object(i.a)(c,2),d=m[0],f=m[1],p=Object(a.useState)(""),w=Object(i.a)(p,2),O=w[0],j=w[1],k=Object(a.useState)(""),y=Object(i.a)(k,2),N=y[0],S=y[1],C=Object(a.useState)(null),P=Object(i.a)(C,2),T=P[0],B=P[1],D=Object(a.useState)(!1),F=Object(i.a)(D,2),J=F[0],A=F[1];Object(a.useEffect)((function(){b().then((function(e){o(e.data)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:T,isError:J}),r.a.createElement(l,{setFilter:S}),r.a.createElement(s,{addPerson:function(e){e.preventDefault();var n={id:t[t.length-1].id+1,name:d,number:O};if(t.some((function(e){return e.name===d})))window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))&&E(t.find((function(e){return e.name===d})).id,n).then((function(e){B("Changed number for ".concat(d,".")),setTimeout((function(){B(null),A(!1)}),5e3),b().then((function(e){o(e.data)}))})).catch((function(e){A(!0),B("Information of ".concat(d," has already been removed from the server.")),b().then((function(e){o(e.data)})),setTimeout((function(){B(null),A(!1)}),5e3)}));else{var a=Object(u.a)(t);a.push(n),h(n).then((function(){B("Added ".concat(d,".")),o(a),setTimeout((function(){B(null)}),5e3)})).catch((function(e){A(!0),B("Person validation failed: ".concat(JSON.stringify(e.response.data),".")),setTimeout((function(){B(null)}),5e3)}))}},setNewName:f,setNewNumber:j}),r.a.createElement("h3",null,"Add a new"),r.a.createElement("h2",null,"Numbers"),r.a.createElement(v,{persons:t,setPersons:o,filter:N}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.5bd7dfce.chunk.js.map